{
  "permissions": {
    "allow": [
      "mcp__context7__resolve-library-id",
      "mcp__context7__get-library-docs",
      "Bash(git commit -m \"$(cat <<''EOF''\nfeat(tts): Text-to-Speech Integration für Story-Phase mit OpenAI TTS\n\nImplementierung eines vollständigen TTS-Systems für immersives Lernen:\n\n✨ Features:\n- OpenAI TTS API Integration (tts-1 Model) für Audio-Generierung\n- Intelligentes Voice-Mapping für 5 Sprachen (de, en, es, fr, it)\n- On-demand Audio-Generierung (Base64-URLs, kein Storage benötigt)\n- TTSPlayer Component mit Loading/Playing States\n- Integration in Story-Phase (Narrative + Key Learnings)\n- Automatische Sprachauswahl basierend auf User-Profil\n\n🔧 Technische Details:\n- Server Action: generateSpeechAudio() für TTS-Generierung\n- Client Component: TTSPlayer mit Audio-Controls (Play/Stop)\n- Voice-Mapping: onyx (de), nova (en), alloy (es), fable (fr), shimmer (it)\n- Validierung: Max. 4096 Zeichen (OpenAI Limit)\n- Error-Handling: User-freundliche Fehlermeldungen\n\n📁 Neue Dateien:\n- app/lesson/[id]/actions/actions-tts.tsx (Server Action)\n- components/learning/tts-player.tsx (Client Component)\n- components/learning/dialog-message-with-tts.tsx (Dialog TTS Wrapper)\n- components/espresso.tsx (Utility Component)\n- docs/TTS-INTEGRATION.md (Vollständige Dokumentation)\n- docs/TTS-SUPABASE-STORAGE.md (Storage-Strategie für Phase 2)\n- supabase/migrations/00_initial_schema.sql (Initial DB Schema)\n- test-db-connection.js (DB Connection Test)\n\n🔄 Geänderte Dateien:\n- story-phase.tsx: TTS-Button Integration mit key-prop für React Remount\n- dialog-phase.tsx: TTS-Vorbereitung (Dialog-TTS geplant für Phase 2)\n- lesson.types.ts: audioUrl-Feld für StoryContent/StoryChapter\n- profile.types.ts: TTS-Einstellungen (ttsEnabled, ttsAutoPlay, ttsVoice)\n- package.json: styled-components@6.1.19 für framer-motion compatibility\n- example.env: TTS Model Dokumentation\n\n💰 Kosten & Performance:\n- ~$0.034 pro Lesson (~3 Cent)\n- ~$22.50/Monat bei 1000 aktiven Usern (MVP)\n- Generierung: ~1-2s pro Kapitel (500-800 Zeichen)\n\n🎯 Use Cases:\n- Accessibility für visuell eingeschränkte Nutzer\n- Multitasking (Lernen beim Kochen, Sport, Autofahren)\n- Aussprachehilfe für Fremdsprachen-Lerner\n- Reduzierte Screen-Fatigue bei langen Sessions\n\n📖 Dokumentation:\n- Siehe docs/TTS-INTEGRATION.md für vollständige Feature-Docs\n- Siehe docs/TTS-SUPABASE-STORAGE.md für langfristige Storage-Strategie\n\n🚀 Generated with Claude Code (https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")"
    ],
    "deny": [],
    "ask": []
  }
}
